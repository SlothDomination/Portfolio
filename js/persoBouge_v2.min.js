(function(){"use strict";var e,s;window.addEventListener("load",function(){e=new Phaser.Game(290,193,Phaser.AUTO,"CanvasPersoBouge"),e.state.add("ChargementMedias",t),e.state.add("Jeu",o),e.state.start("ChargementMedias")},!1);var t=function(){};t.prototype={init:function(){},preload:function(){e.load.path="medias/",e.load.image("bg","bg.png");var t=document.getElementById("nomPerso").innerHTML,o=["Kienne","Reyla","Adler","Friedrich","Shix","Faust","Celessria","Reovul"];t===o[0]&&(s=e.load.spritesheet("persoPixel","sprites/"+o[0]+".png",100,100)),t===o[1]&&(s=e.load.spritesheet("persoPixel","sprites/"+o[1]+".png",100,100)),t===o[2]&&(s=e.load.spritesheet("persoPixel","sprites/"+o[2]+".png",100,100));e.load.spritesheet("persoPixel","sprites/Kienne.png",100,100),e.load.spritesheet("persoPixel","sprites/Reyla.png",100,100),e.load.spritesheet("persoPixel","sprites/Adler.png",100,100),e.load.spritesheet("persoPixel","sprites/Friedrich.png",100,100),e.load.spritesheet("persoPixel","sprites/Shix.png",100,100),e.load.spritesheet("persoPixel","sprites/Faust.png",100,100),e.load.spritesheet("persoPixel","sprites/Celessria.png",100,100),e.load.spritesheet("persoPixel","sprites/Reovul.png",100,100)},create:function(){e.state.start("Jeu")}};var o=function(){this.persoPixel=null,this.lesFleches=null,this.vitessePersoX=50,this.vitessePersoY=50};o.prototype={create:function(){var t=this.add.image(0,0,"bg");t.anchor.x=0,t.anchor.y=0,this.placerElementsDuJeu(),this.lesFleches=e.input.keyboard.addKeys({up:Phaser.KeyCode.W,down:Phaser.KeyCode.S,left:Phaser.KeyCode.A,right:Phaser.KeyCode.D}),this.gererLaPhysiqueDuJeu(),e.input.onDown.add(function(){var t=document.getElementById("nomPerso").innerHTML,o=["Kienne","Reyla","Adler","Friedrich","Shix","Faust","Celessria","Reovul","Shopie"];t===o[1]&&(s=e.load.spritesheet("persoPixel","sprites/"+o[1]+".png",100,100),s.loadTexture("Reyla"),console.log(s)),t===o[2]&&s.loadTexture(""+o[2],0)})},placerElementsDuJeu:function(){this.persoPixel=e.add.sprite(0,0,"persoPixel",0),this.persoPixel.anchor.set(.5),this.persoPixel.animations.add("marcheDroite",[6,7,8],10,!0),this.persoPixel.animations.add("marcheGauche",[3,4,5],10,!0),this.persoPixel.animations.add("marcheHaut",[9,10,11],10,!0),this.persoPixel.animations.add("marcheBas",[0,1,2],10,!0)},gererLaPhysiqueDuJeu:function(){e.physics.startSystem(Phaser.Physics.ARCADE),e.physics.enable(this.persoPixel,Phaser.Physics.ARCADE),this.persoPixel.body.velocity.x=this.vitessePersoX,this.persoPixel.body.velocity.y=this.vitessePersoY,this.persoPixel.body.collideWorldBounds=!0},update:function(){if(this.persoPixel.body.velocity.x=0,this.persoPixel.body.velocity.y=0,this.lesFleches.left.isDown){this.persoPixel.body.velocity.x=-this.vitessePersoX,this.persoPixel.animations.play("marcheGauche");var e=document.getElementById("w"),s=document.getElementById("a"),t=document.getElementById("s"),o=document.getElementById("d");e.style.color="#f3bed6",s.style.color="white",t.style.color="#f3bed6",o.style.color="#f3bed6"}else if(this.lesFleches.right.isDown){this.persoPixel.body.velocity.x=this.vitessePersoX,this.persoPixel.animations.play("marcheDroite");e=document.getElementById("w"),s=document.getElementById("a"),t=document.getElementById("s"),o=document.getElementById("d");e.style.color="#f3bed6",s.style.color="#f3bed6",t.style.color="#f3bed6",o.style.color="white"}else if(this.lesFleches.up.isDown){this.persoPixel.body.velocity.y=-this.vitessePersoY,this.persoPixel.animations.play("marcheHaut");e=document.getElementById("w"),s=document.getElementById("a"),t=document.getElementById("s"),o=document.getElementById("d");e.style.color="white",s.style.color="#f3bed6",t.style.color="#f3bed6",o.style.color="#f3bed6"}else if(this.lesFleches.down.isDown){this.persoPixel.body.velocity.y=this.vitessePersoY,this.persoPixel.animations.play("marcheBas");e=document.getElementById("w"),s=document.getElementById("a"),t=document.getElementById("s"),o=document.getElementById("d");e.style.color="#f3bed6",s.style.color="#f3bed6",t.style.color="white",o.style.color="#f3bed6"}else{this.persoPixel.animations.stop(),this.persoPixel.frame=1;e=document.getElementById("w"),s=document.getElementById("a"),t=document.getElementById("s"),o=document.getElementById("d");e.style.color="#f3bed6",s.style.color="#f3bed6",t.style.color="#f3bed6",o.style.color="#f3bed6"}},changeTexture:function(){var e=document.getElementById("nomPerso").innerHTML,t=["Kienne","Reyla","Adler","Friedrich","Shix","Faust","Celessria","Reovul","Shopie"];e===t[1]&&this.persoPixel.loadTexture(t[1],0),e===t[2]&&s.loadTexture(t[2],0)}}})();